% !TEX option = -shell-escape
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% This work is licensed under the Creative Commons Attribution 4.0
% International License. To view a copy of this license, visit
% http://creativecommons.org/licenses/by/4.0/.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\documentclass[12pt]{ussci}

\usepackage{todonotes}
\newcommand\ck{ChemKED}
\newcommand\pk{\texttt{PyKED}}
\usepackage[inline]{enumitem}
\setlist{noitemsep}
%======================================================================
\addbibresource{pyked.bib}
%======================================================================
\newcommand\papertopic{Reaction Kinetics}
%======================================================================

\title{ ChemKED: a human- and machine-readable data standard for chemical kinetics experiments }

\author[1*]{Bryan W. Weber}
\author[2]{Kyle E. Niemeyer}

\affil[1]{Department of Mechanical Engineering, University of Connecticut, Storrs, CT, USA}
\affil[2]{School of Mechanical, Industrial, and Manufacturing Engineering, Oregon State University, Corvallis, OR, USA}
\affil[*]{Corresponding author: \email{bryan.weber@uconn.edu}}

\begin{document}
\maketitle

%====================================================================
\begin{abstract} % not to exceed 200 words
Fundamental experimental measurements of quantities including ignition delay
times, laminar flame speeds, and species profiles serve important roles in
understanding fuel chemistry and validating chemical kinetic models. However,
despite both the importance and abundance of such information in the literature,
the community lacks a widely adopted standard format for this data. This impedes
both sharing and wide use by the community. In this talk, we will introduce a
new Chemical Kinetics Experimental Data format, ChemKED, and the related
Python-based package for creating and validating ChemKED-formatted files called
PyKED. We will also review past and related efforts, and motivate the need for a
new solution. ChemKED currently supports the representation of autoignition
delay time and laminar flame speed measurements. ChemKED-formatted files contain
all of the information needed to simulate experimental data points, including
uncertainty. ChemKED is based on the YAML data serialization language, and is
intended as a human- and machine-readable standard for easy creation and
automated use. Development of ChemKED and PyKED occurs openly on GitHub under
the BSD 3-clause license, and contributions from the community are welcome.
Plans for future development include support for experimental data from jet
stirred reactor, extinction, and speciation measurements.
\end{abstract}

% (Provide 2-4 keywords describing your research. Only abbreviations firmly
% established in the field may be used. These keywords will be used for
% sessioning/indexing purposes.)
\begin{keyword}
    chemical kinetics\sep software\sep database
\end{keyword}

%====================================================================
\section{Introduction}
%
\todo[inline]{Kyle to do}

Fundamental combustion experiments provide

%====================================================================
\section{Related work}
%
\todo[inline]{Kyle to do}

The combustion\slash chemical kinetics community lacks an accepted, commonly used
standard for recording and sharing data from fundamental combustion experiments.
Interestingly, this contrasts the situation for chemical kinetic models, where the
CHEMKIN~\cite{Kee:1996ck} format dominates. Competing standards such as the
Cantera~\cite{Cantera:2.3.0} CTI format or FlameMaster lag behind considerably, although
use of the former continually grows due to Cantera's open availability.\todo{add flamemaster citation}{}
Similarly, 

Instead, such data must typically be found in under-documented, nonstandard comma-separated value
files and Excel spreadsheets, or even contained in PDF tables or figures rather than as
supplementary material associated with a paper.

While the community has not widely adopted a standard format,
---most notably, Frenklach developed the PrIMe (\textbf{Pr}ocess \textbf{I}nformatics
\textbf{M}od\textbf{e}l) data format~\cite{Frenklach:2007bm,You:2011hy} and an associated
online database, the PrIMe Data Warehouse~\cite{PrIMe}.

More recently, Varga et al.~\cite{Varga2015a,Varga2015b} developed the \texttt{ReSpecTh} standard,
an XML-based format that builds on, and is compatible with, PrIMe.

We aim to develop a new, human- and machine-readable data standard for fundamental combustion
experiments, \ck{}, and offer tools for easily working with data encoded in this format.
Our motivations are similar to some of those of the PrIMe and \texttt{ReSpecTh} teams, although
less ambitious in scope: enable easy sharing and use of data, for the (primary) purposes of
developing and validating predictive chemical kinetic models.
However, those efforts were generally less successful in being adopted---we hope to succeed
by developing more user-friendly data files and tools for interacting with them.

Niemeyer recently introduced an initial version of the \ck{} format~\cite{Niemeyer:2016wf},
and in this work we further formalize and develop the standard. We also discuss a related
Python software tool for validating and working with \ck{} files: \pk{}.

%====================================================================
\section{Overview of format}\label{sec:overview-of-format}

The \ck{} file is a YAML-format file. This format offers the advantage of being
human readable, written in plain text, and having parsers in most common
programming languages, including Python, C++, Java, Perl, MATLAB, and many
others. The YAML syntax is quite simple. The basic file structure is made of
mappings, delimited by a colon. The key for the mapping is on the left of the
colon, and the value on the right can be a single value, a sequence of values, or a nested mapping:

\begin{minted}{yaml}
    key1: value  # Single-value mapping
    key2: [0, 1, 2]  # Mapping with sequence
    key3:  # Alternative sequence format
      - 0
      - 1
    key4:  # Nested mapping
      key5: 0
\end{minted}

The \yaml|value| can be a string, integer, or floating point number. The type is
inferred from the \yaml|key| when the value is read. The \ck{} format is
designed to include all of the information necessary to simulate a given
experiment. The \ck{} format can be broken into two main sections. The first
section details all of the ``meta'' information about the experiment and the
\ck{} file. In this section, the common \yaml|author| mapping is used for any
fields where an author must be specified. The \yaml|author| mapping contains the
following fields:
%
\begin{itemize}
    \item \yaml|name| (required, string): The author's full name
    \item \yaml|ORCID| (optional, string): the author's ORCID number
\end{itemize}
%
More generally for the meta information, the required keys in this section
are:
%
\begin{itemize}
    \item \yaml|file-author| (required, \yaml|author|-type mapping): The author
    of the \ck{} file
    \item \yaml|file-version| (required, integer): The version of the \ck{} file
    \item \yaml|chemked-version| (required, string): The version of the \ck{}
    schema that this file conforms to
    \item \yaml|reference| (required, mapping): The reference information for
    the article associated with the data in the file. The fields in this
    mapping are:
    \begin{itemize}
        \item \yaml|authors| (required, sequence): A sequence of \yaml|author| mappings
        \item \yaml|journal| (required, string): The name of the publishing journal
        \item \yaml|year| (required, integer): The year of publication
    \end{itemize}
    \item \yaml|experiment-type| (required, string): One of \yaml|ignition delay| or \yaml|flame speed|
    \item \yaml|apparatus| (required, string): The type of apparatus used to perform the experiment
\end{itemize}

In addition to the meta information, the data encoded in the \ck{} file is in
a mapping called \yaml|datapoints|. The \yaml|datapoints| mapping contains a
sequence of nested mappings, with the following information for each element of
the sequence:
%
\begin{itemize}
    \item \yaml|temperature| (required, sequence): The temperature of the experiment, with units
    \item \yaml|ignition-delay| (optional, sequence): The ignition delay of the experiment, with units, if the \yaml|experiment-type| is \yaml|ignition delay|
    \item \yaml|flame-speed| (optional, sequence): The flame speed of the experiment, with units, if the \yaml|experiment-type| is \yaml|flame speed|
    \item \yaml|pressure| (required, string): The pressure of the experiment, with units
    \item \yaml|composition| (required, sequence): The composition of the mixture in the experiment, a sequence of mappings with the following fields
    \begin{itemize}
        \item \yaml|species-name| (required, string): The name of the species
        \item \yaml|mole-fraction|, \yaml|mass-fraction|, \yaml|mole-percent| (required, float): The mole fraction or percent, or the mass fraction. Only one of the three is permitted in a given \yaml|composition| sequence.
    \end{itemize}
    \item \yaml|ignition-type| (required, mapping); The type of ignition measured in the experiments. The required fields are
    \begin{itemize}
        \item \yaml|type| (required, string): How the ignition delay was measured, one of \yaml|d/dt max| to indicate the ignition point is found at the maximum of the time derivative of the \yaml|target|, or \yaml|max| or \yaml|min| to indicate the ignition point is at the maximum or minimum of the \yaml|target|
        \item \yaml|target| (required, string): The target for the type of the ignition point, one of \yaml|temperature|, \yaml|pressure|, \yaml|OH|, \yaml|OH*|, \yaml|CH|, or \yaml|CH*|
    \end{itemize}
\end{itemize}

%====================================================================
\section{PyKED Architecture}
%
\todo[inline]{Bryan to do}

\pk{} relies on well-established scientific Python software tools.
These include NumPy~\cite{vanderWalt:2011np} for array manipulation, Pint~\cite{Grecco2016} for
interpreting and converting between units, \texttt{ruamel.yaml} for parsing YAML files,\todo{needs ref}{}
Cerberus for validating \ck{} files\todo{needs ref}{},
and pytest~\cite{pytest:3.0.1} for unit testing.
Travis-CI~\cite{Travis2016} also provides continuous integration testing.

\todo[inline]{Need to archive version of PyKED and cite}

\pk{} is available under the permissive, open-source BSD 3-clause license via a GitHub
repository: \url{https://github.com/pr-omethe-us/PyKED}. It can be installed using setuptools
by downloading the source code files and executing \texttt{python setup.py install}. More mature
versions of \pk{} will be distributed on \href{https://pypi.python.org/pypi}{PyPI}
(Python Package Index) and conda-forge.\todo{add URL}{}

%====================================================================
\section{Use example}
%
\todo[inline]{Bryan/Kyle to do}


%====================================================================
\section{Conclusions and future work}
%
\todo[inline]{both to do}



%====================================================================
\section{Acknowledgements}
This research was funded by \ldots
\todo[inline]{update}
% Kyle: I don't think I have any funding yet to acknowledge for this


\printbibliography

\end{document}
